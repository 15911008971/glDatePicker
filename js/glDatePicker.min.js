/* glDatePicker v1.0 - http://code.gautamlad.com/glDatePicker/ */
(function(c){var r={calId:0,cssName:"default",startDate:-1,endDate:-1,showPrevNext:!0,allowOld:!0,showAlways:!1,position:"absolute"},g={init:function(a){return this.each(function(){var b=c(this),d=c.extend({},r);d.calId=b[0].id+"-gldp";a&&(d=c.extend(d,a));b.data("settings",d);b.click(g.show);d.showAlways&&setTimeout(function(){b.trigger("click")},50);c(window).bind("click",function(){g.hide.apply(b)})})},show:function(a){a.stopPropagation();g.update.apply(c(this))},hide:function(){var a=c(this).data("settings");
a.showAlways||c("#"+a.calId+":not(.active)").slideUp(200)},update:function(){var a=c(this),b=a.data("settings"),d=b.calId,p=b.showPrevNext,h=b.startDate;b.startDate==-1&&(h=new Date,h.setDate(1));h.setHours(0,0,0,0);var i=(new String(b.endDate)).match(/^\d+$/)==null?b.endDate:null,f=a.data("theDate"),f=f==-1||typeof f=="undefined"?h:f,m=new Date(f);m.setDate(1);var j=new Date(f);j.setMonth(f.getMonth()+1);j.setDate(0);m.getDate();var j=j.getDate(),r=m.getDay(),n=new Date(m);n.setDate(0);var s=n.getDate();
a.data("theDate",f);for(var n="",t=0,u=0;t<6;t++){for(var v="",q=0;q<7;q++,u++){var k=s-r+u+1,l=k-s,e=q==0?"sun":q==6?"sat":"day";if(l>=1&&l<=j){k=new Date;k.setHours(0,0,0,0);var o=new Date(f);o.setHours(0,0,0,0);o.setDate(l);e=k.getTime()==o.getTime()?"today":e;b.allowOld||(e=o.getTime()<h.getTime()?"noday":e);b.endDate!=-1&&(i==null&&(i=new Date,i.setDate(i.getDate()+b.endDate)),i.setHours(0,0,0,0),e=o.getTime()>i.getTime()?"noday":e)}else e="noday",l=l<=0?k:k-j-s;v+="<td class='gldp-days "+e+
" **-"+e+"'><div class='"+e+"'>"+l+"</div></td>"}n+="<tr class='days'>"+v+"</tr>"}h=["January","February","March","April","May","June","July","August","September","October","November","December"][f.getMonth()]+" "+f.getFullYear();p=("<div class='**'><table><tr>"+(p?"<td class='**-prevnext prev'>&#9668;</td>":"<td></td>")+"<td class='**-monyear' colspan='5'>{MY}</td>"+(p?"<td class='**-prevnext next'>&#9658;</td>":"<td></td>")+"</tr><tr class='**-dow'><td>Sun</td><td>Mon</td><td>Tue</td><td>Wed</td><td>Thu</td><td>Fri</td><td>Sat</td></tr>"+
n+"</table><div>").replace(/\*{2}/gi,"gldp-"+b.cssName).replace(/\{MY\}/gi,h);c("#"+d).length==0&&a.after(c("<div id='"+d+"'></div>").css({position:b.position,"z-index":b.zIndex,left:a.offset().left,top:a.offset().top+a.outerHeight(!0)}));var d=c("#"+d),w=0;d.html(p).show().mouseenter(function(){clearTimeout(w)}).mouseleave(function(){var b=c(this);w=setTimeout(function(){b.removeClass();g.hide.apply(a)},500)});c("[class*=-prevnext]",d).click(function(b){b.stopPropagation();var b=c(this).hasClass("prev")?
-1:1,d=new Date(m);d.setMonth(f.getMonth()+b);a.data("theDate",d);g.update.apply(a)});c("tr.days td:not(.noday)",d).mouseenter(function(a){a.stopPropagation();a="gldp-"+b.cssName+"-"+c(this).children("div").attr("class");c(this).removeClass(a).addClass(a+"-hover")}).mouseleave(function(a){a.stopPropagation();a="gldp-"+b.cssName+"-"+c(this).children("div").attr("class");c(this).removeClass(a+"-hover").addClass(a)}).click(function(b){b.stopPropagation();var b=c(this).children("div").html(),d=a.data("settings"),
e=new Date(f);e.setDate(b);a.data("theDate",e);a.val(e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear());if(d.onChange!=null&&typeof d.onChange!="undefined")d.onChange(a,e);g.hide.apply(a)})}};c.fn.glDatePicker=function(a){if(g[a])return g[a].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return g.init.apply(this,arguments);else c.error("Method "+a+" does not exist on jQuery.glDatePicker")}})(jQuery);